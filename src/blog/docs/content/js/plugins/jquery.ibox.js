/**
 * iBox 2.2 (Build 1612)
 * For more info & download: http://www.ibegin.com/labs/ibox/
 * Created as a part of the iBegin Labs Project - http://www.ibegin.com/labs/
 * For licensing please see readme.html (MIT Open Source License)
*/
var iBox=function(){var e={close_label:"Close",inherit_frames:!1,fade_in_speed:300,fade_out_speed:300,attribute_name:"rel",tags_to_hide:["embed","object"],default_width:600,version_number:"2.2",build_number:"1612",is_opera:-1!=navigator.userAgent.indexOf("Opera/9"),is_ie:-1!=navigator.userAgent.indexOf("MSIE "),is_ie6:!1,is_firefox:"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Gecko")&&-1==navigator.userAgent.indexOf("Netscape"),is_mac:-1!=navigator.userAgent.indexOf("Macintosh"),base_url:"",setPath:function(t){e.base_url=t},checkTags:function(t,n){if(!t)var t=document.body;if(!n)var n="a";for(var i=t.getElementsByTagName(n),o=0;o<i.length;o++)if(i[o].getAttribute(e.attribute_name)){var r=i[o].getAttribute(e.attribute_name);(-1!=r.indexOf("ibox")||"ibox"==r.toLowerCase())&&(i[o].onclick=e.handleTag)}},bind:function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return function(n){return e.apply(this,[n].concat(t))}},html:function(n,r){if(void 0===n)return i.content;if(void 0===r)var r={};if(t.is_loaded){e.clear(),e.updateObject(i.wrapper.style,{display:"block",visibility:"hidden",left:0,top:0,height:"",width:""}),"string"==typeof n?i.content.innerHTML=n:i.content.appendChild(n);e.getPageSize();if(void 0===r.can_resize&&(r.can_resize=!0),void 0===r.fade_in&&(r.use_fade=!0),r.fullscreen&&(r.width="100%",r.height="100%"),o.container=[2*i.wrapper.offsetLeft,2*i.wrapper.offsetTop],o.wrapper=[i.wrapper.offsetWidth-i.content.offsetWidth,i.wrapper.offsetHeight-i.content.offsetHeight],o.wrapper[1]+=4,r.width)var a=r.width;else var a=e.default_width;if(r.height)var d=r.height;else{i.content.style.height="100%";var d=i.content.offsetHeight+12;i.content.style.height=""}t.dimensions=[a,d],t.params=r,e.reposition();for(var s=0;s<e.tags_to_hide.length;s++)l(e.tags_to_hide[s],i.content);i.wrapper.style.visibility="visible"}},clear:function(){for(i.loading.style.display="none";i.content.firstChild;)i.content.removeChild(i.content.firstChild)},show:function(n,i,o){d(i,o,function(){e.html(n,t.params)})},showURL:function(n,i,o){d(i,o,function(){for(var i=0;i<e.plugins.list.length;i++){var o=e.plugins.list[i];if(o.match(n)){t.plugin=o,o.render(n,t.params);break}}})},hide:function(){t.plugin&&t.plugin.unload&&t.plugin.unload(),t={},e.clear();for(var n=0;n<e.tags_to_hide.length;n++)l(e.tags_to_hide[n]);i.loading.style.display="none",i.wrapper.style.display="none",e.fade(i.overlay,e.getOpacity(null,i.overlay),0,e.fade_out_speed,function(){i.overlay.style.display="none"}),e.fireEvent("hide")},reposition:function(){if(t.is_loaded){if("none"!=i.loading.style.display&&e.center(i.loading),t.dimensions){var n=e.getPageSize(),r=t.dimensions[0],a=t.dimensions[1];-1!=a.toString().indexOf("%")?i.wrapper.style.height=(Math.max(document.documentElement.clientHeight,document.body.clientHeight,n.height)-o.container[0])*(parseInt(a)/100)+"px":a?(i.content.style.height=a+"px",i.wrapper.style.height=i.content.offsetHeight+o.wrapper[1]+"px"):i.wrapper.style.height=i.content.offsetHeight+o.wrapper[1]+"px";i.content.offsetHeight-i.content.firstChild.offsetHeight;if(-1!=r.toString().indexOf("%")){i.wrapper.style.width=(Math.max(document.documentElement.clientWidth,document.body.clientWidth,n.width)-o.container[1])*(parseInt(r)/100)+"px"}else i.content.style.width=r+"px",i.wrapper.style.width=i.content.offsetWidth+o.wrapper[0]+"px";e.updateObject(i.content.style,{width:"",height:""});var r=parseInt(i.wrapper.style.width),a=parseInt(i.wrapper.style.height);if(t.params.can_resize){var l=n.width,d=n.height;l-=o.container[0],d-=o.container[1],r>l&&(t.params.constrain&&(a*=l/r),r=l),a>d&&(t.params.constrain&&(r*=d/a),a=d),e.updateObject(i.wrapper.style,{width:r+"px",height:a+"px"})}i.content.style.height=a-o.wrapper[1]+"px",t.dimensions!=["100%","100%"]&&e.center(i.wrapper)}i.overlay.style.height=Math.max(document.body.clientHeight,document.documentElement.clientHeight)+"px"}},updateObject:function(e,t){for(var n in t)e[n]=t[n]},center:function(t){var n=e.getPageSize(),i=e.getScrollPos(),o=e.getElementSize(t),r=Math.round((n.width-o.width)/2+i.scrollX),a=Math.round((n.height-o.height)/2+i.scrollY);t.offsetLeft&&(r-=t.offsetLeft),t.offsetTop&&(a-=t.offsetTop),t.style.left&&(r+=parseInt(t.style.left)),t.style.top&&(a+=parseInt(t.style.top)),r-=10,e.updateObject(t.style,{top:a+"px",left:r+"px"})},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):void 0},getScrollPos:function(){var e=document.documentElement;return{scrollX:document.body.scrollLeft||window.pageXOffset||e&&e.scrollLeft,scrollY:document.body.scrollTop||window.pageYOffset||e&&e.scrollTop}},getPageSize:function(){return{width:window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight}},getElementSize:function(e){return{width:e.offsetWidth||e.style.pixelWidth,height:e.offsetHeight||e.style.pixelHeight}},fade:function(t,n,i,o,r){if(!(void 0!==n&&n>=0&&100>=n))var n=0;if(!(void 0!==i&&i>=0&&100>=i))var i=100;if(void 0===o)var o=0;t.fader&&clearInterval(t.fader),o||(e.setOpacity(null,t,i),r&&r());var a=i-n,l=o,d=25,s=l/d,c=Math.ceil(a/s);t.fader=setInterval(e.bind(function(t,n,i,o,r){var a=e.getOpacity(t,n)+i;e.setOpacity(t,n,a),(0>i&&o>=a||i>0&&a>=o)&&(e.setOpacity(t,n,o),clearInterval(n.fader),r&&r())},t,c,i,r),d)},setOpacity:function(e,t,n){n=Math.round(n),t.style.opacity=n/100,t.style.filter="alpha(opacity="+n+")"},getOpacity:function(t,n){return 100*e.getStyle(n,"opacity")},createXMLHttpRequest:function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/html");else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return e?e:(alert("Cannot create XMLHTTP instance"),!1)},addEvent:function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1),!0;if(e.attachEvent){var i=e.attachEvent("on"+t,n);return i}return!1},addEventListener:function(e,t){n[e]||(n[e]=new Array),n[e].push(t)},fireEvent:function(e){if(n[e]&&n[e].length)for(var t=0;t<n[e].length;t++){for(var i=[],o=1;o<arguments.length;o++)i.push(arguments[o]);if(n[e][t](i)===!1)break}},parseQuery:function(e){var t=new Object;if(!e)return t;for(var n,i=e.split(/[;&]/),o=0;o<i.length;o++){var r=i[o].split("=");if(r&&2==r.length){var a=unescape(r[0]),l=unescape(r[1]);if(l=l.replace(/\+/g," "),'"'==l[0])var d='"';else if("'"==l[0])var d="'";else var d=null;if(d){if(l[l.length-1]!=d)do o+=1,l+="&"+i[o];while((n=i[o][i[o].length-1])!=d);l=l.substr(1,l.length-2)}"true"==l?l=!0:"false"==l?l=!1:"null"==l&&(l=null),t[a]=l}}return t},handleTag:function(t){var n=this.getAttribute("rel"),i=e.parseQuery(n.substr(5,999));if(i.target)var o=i.target;else if(this.target&&!i.ignore_target)var o=this.target;else var o=this.href;var r="";return e.inherit_frames&&window.parent?window.parent.iBox.showURL(o,r,i):e.showURL(o,r,i),!1},plugins:{list:new Array,register:function(t,n){if(void 0===n)var n=!1;n?e.plugins.list.push(t):e.plugins.list=[t].concat(e.plugins.list)}}},t={},n={},i={},o={},r=function(t){pagesize=e.getPageSize(),i.container=document.createElement("div"),i.container.id="ibox",i.overlay=document.createElement("div"),i.overlay.style.display="none",e.setOpacity(null,i.overlay,0),e.is_firefox?i.overlay.style.backgroundImage="":i.overlay.style.background="",i.overlay.id="ibox_overlay",params={position:"absolute",top:0,left:0,width:"100%"},e.updateObject(i.overlay.style,params),i.overlay.onclick=e.hide,i.container.appendChild(i.overlay),i.loading=document.createElement("div"),i.loading.id="ibox_loading",i.loading.innerHTML="Loading...",i.loading.style.display="none",i.loading.onclick=e.hide,i.container.appendChild(i.loading),i.wrapper=document.createElement("div"),i.wrapper.id="ibox_wrapper",e.updateObject(i.wrapper.style,{position:"absolute",top:0,left:0,display:"none"}),i.content=document.createElement("div"),i.content.id="ibox_content",e.updateObject(i.content.style,{overflow:"auto"}),i.wrapper.appendChild(i.content);var n=document.createElement("div");n.id="ibox_footer_wrapper";var o=document.createElement("a");return o.innerHTML=e.close_label,o.href="javascript:void(0)",o.onclick=e.hide,n.appendChild(o),i.footer=document.createElement("div"),i.footer.id="ibox_footer",i.footer.innerHTML="&nbsp;",n.appendChild(i.footer),i.wrapper.appendChild(n),i.container.appendChild(i.wrapper),t.appendChild(i.container),e.updateObject(i.wrapper.style,{right:"",bottom:""}),i.container},a=function(t,n){if(void 0===n)var n=document.body;for(var i=n.getElementsByTagName(t),o=0;o<i.length;o++)"hidden"!=e.getStyle(i[o],"visibility")&&"none"!=i[o].style.display&&(i[o].style.visibility="hidden",i[o].wasHidden=!0)},l=function(e,t){if(void 0===t)var t=document.body;for(var n=t.getElementsByTagName(e),i=0;i<n.length;i++)n[i].wasHidden&&(n[i].style.visibility="visible",n[i].wasHidden=null)},d=function(n,o,r){if(c||p(),void 0===o)var o={};t.plugin&&e.hide(),t.is_loaded=!0,t.params=o,i.loading.style.display="block",e.center(i.loading),e.reposition();for(var l=0;l<e.tags_to_hide.length;l++)a(e.tags_to_hide[l]);if(i.footer.innerHTML=n||"&nbsp;",i.overlay.style.display="block",e.is_firefox)var d=100;else var d=70;e.fade(i.overlay,e.getOpacity(null,i.overlay),d,e.fade_in_speed,r),e.fireEvent("show")},s=function(){var e="#ibox {z-index:1000000;text-align:left;} #ibox_overlay {z-index:1000000;} #ibox_loading {position:absolute;z-index:1000001;} #ibox_wrapper {margin:30px;position:absolute;top:0;left:0;z-index:1000001;} #ibox_content {z-index:1000002;margin:27px 5px 5px 5px;padding:2px;} #ibox_content object {display:block;} #ibox_content .ibox_image {width:100%;height:100%;margin:0;padding:0;border:0;display:block;} #ibox_footer_wrapper a {float:right;display:block;outline:0;margin:0;padding:0;} #ibox_footer_wrapper {text-align:left;position:absolute;top:5px;right:5px;left:5px;white-space:nowrap;overflow:hidden;}",t="#ibox_footer_wrapper {font-weight:bold;height:20px;line-height:20px;} #ibox_footer_wrapper a {text-decoration:none;background:#888;border:1px solid #666;line-height:16px;padding:0 5px;color:#333;font-weight:bold;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:10px;} #ibox_footer_wrapper a:hover {background-color:#bbb;color:#111;} #ibox_footer_wrapper {font-size:12px;font-family:Verdana, Arial, Helvetica, sans-serif;color:#111;} #ibox_wrapper {border:1px solid #ccc;} #ibox_wrapper {background-color:#999;}#ibox_content {background-color:#eee;border:1px solid #666;} #ibox_loading {padding:50px; background:#000;color:#fff;font-size:16px;font-weight:bold;}",n=(document.getElementsByTagName("head")[0],document.createElement("div"));n.innerHTML='<p>x</p><style type="text/css">'+t+"</style>",n.innerHTML='<p>x</p><style type="text/css">'+e+"</style>"},c=!1,p=function(){if(!c){c=!0,s();for(var t,n=document.getElementsByTagName("script"),i=0,o=null;o=n[i];i++)if((t=o.getAttribute("src"))&&(t=t.split("?")[0],"/ibox.js"==t.substr(t.length-8))){e.setPath(t.substr(0,t.length-7));break}r(document.body),e.checkTags(document.body,"a"),e.http=e.createXMLHttpRequest(),e.fireEvent("load")}};e.addEvent(window,"keypress",function(e){e.keyCode==(window.event?27:e.DOM_VK_ESCAPE)&&iBox.hide()}),e.addEvent(window,"resize",e.reposition),e.addEvent(window,"load",p),e.addEvent(window,"scroll",e.reposition);var h=function(){var t=!1,n=null;return{match:function(e){return-1!=e.indexOf("#")},unload:function(){if(!t){var i=e.html().firstChild;i&&(i.style.display="none",n.appendChild(i))}},render:function(i,o){t=!1;var r=i.substr(i.indexOf("#")+1),a=document.getElementById(r);a?(n=a.parentNode,a.style.display="block",e.html(a,o)):(t=!0,e.html(document.createTextNode("There was an error loading the document."),o))}}}();e.plugins.register(h,!0);var f=function(){var t=/\.jpg|\.jpeg|\.png|\.gif/gi;return{match:function(e){return e.match(t)},render:function(t,n){var i=document.createElement("img");i.onclick=e.hide,i.className="ibox_image",i.style.cursor="pointer",i.onload=function(){e.html(i,{width:this.width,height:this.height,constrain:!0})},i.onerror=function(){e.html(document.createTextNode("There was an error loading the document."),n)},i.src=t}}}();e.plugins.register(f);var u=function(){var t=/(?:http:\/\/)?(?:www\d*\.)?(youtube\.(?:[a-z]+))\/(?:v\/|(?:watch(?:\.php)?)?\?(?:.+&)?v=)([^&]+).*/;return{match:function(e){return e.match(t)},render:function(n,i){var o=n.match(t),r=o[1],a=o[2];i.width=425,i.height=355,i.constrain=!0;var l='<span><object width="100%" height="100%" style="overflow: hidden; display: block;"><param name="movie" value="http://www.'+r+"/v/"+a+'"/><param name="wmode" value="transparent"/><embed src="http://www.'+r+"/v/"+a+'" type="application/x-shockwave-flash" wmode="transparent" width="100%" height="100%"></embed></object></span>';e.html(l,i)}}}();e.plugins.register(u);var g=function(){return{match:function(e){return!0},render:function(t,n){e.http.open("get",t,!0),e.http.onreadystatechange=function(){4==e.http.readyState&&(200==e.http.status||0==e.http.status?e.html(e.http.responseText,n):e.html(document.createTextNode("There was an error loading the document."),n))},e.http.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");try{e.http.send(null)}catch(i){e.html(document.createTextNode("There was an error loading the document."),n)}}}}();return e.plugins.register(g,!0),e}();